# REQ-011: Now Playing & MPD Integration

**ID:** REQ-011
**Domain:** Display
**Status:** Done
**Priority:** P1 (Important)

## Description

The application MUST display track metadata (title, artist, album, cover art) for playing sources, with MPD as the primary metadata provider and external APIs as fallback for album art.

## Acceptance Criteria

- [x] Display track title, artist, and album for playing sources
- [x] Show album art (80x80px with rounded corners)
- [x] Fetch metadata from MPD via async TCP client (`currentsong`)
- [x] Fetch album art from MPD (`readpicture`, `albumart`) with chunked retrieval
- [x] Fallback to iTunes Search API when MPD art unavailable
- [x] Fallback to MusicBrainz Cover Art Archive as secondary provider
- [x] Real-time track change detection via MpdMonitor (2s polling)
- [x] Handle Snapcast HTTP server image cache URLs with hostname rewriting

## Implementation

- **MPD Client:** `src/snapcast_mvp/api/mpd/client.py` — Full async MPD protocol client
- **MPD Monitor:** `src/snapcast_mvp/core/mpd_monitor.py` — Track change detection with art cache
- **Album Art Providers:** `src/snapcast_mvp/api/album_art/` — Provider chain (iTunes, MusicBrainz)
- **Tests:** `tests/test_mpd_*.py`, `tests/test_album_art.py`
